{"ast":null,"code":"import _defineProperty from\"/Users/faisal/new-clicker-game/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/Users/faisal/new-clicker-game/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/faisal/new-clicker-game/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/faisal/new-clicker-game/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/faisal/new-clicker-game/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import Axios from\"axios\";import AuthRenderer from\"./AuthRenderer\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Authentication=/*#__PURE__*/function(_React$Component){_inherits(Authentication,_React$Component);var _super=_createSuper(Authentication);function Authentication(_ref){var _this;var getGameInfo=_ref.getGameInfo,setGameInfo=_ref.setGameInfo,setLoggedIn=_ref.setLoggedIn;_classCallCheck(this,Authentication);_this=_super.call(this);_this.register=function(){Axios.post(\"http://localhost:3001/create-user\",{username:_this.state.usernameReg,password:_this.state.passwordReg,gameInfo:_this.getGameInfo()}).then(function(){_this.setLoggedIn();});};_this.saveInfo=function(){if(!_this.state.isLoggedIn)return;Axios.post(\"http://localhost:3001/save-data\",{username:_this.state.usernameLogin,password:_this.state.passwordLogin,gameInfo:_this.getGameInfo()}).then(function(){return console.log(\"Auto Save\",_this.getGameInfo());});};_this.login=function(){Axios.post(\"http://localhost:3001/login\",{username:_this.state.usernameLogin,password:_this.state.passwordLogin}).then(function(response){_this.setState({isLoggedIn:true});_this.setLoggedIn();_this.setGameInfo(response.data);});};_this.getGameInfo=getGameInfo;_this.setGameInfo=setGameInfo;_this.setLoggedIn=setLoggedIn;_this.state={usernameReg:\"\",passwordReg:\"\",usernameLogin:\"\",passwordLogin:\"\",isLoggedIn:false};return _this;}_createClass(Authentication,[{key:\"changeState\",value:function changeState(key,val){this.setState(_defineProperty({},key,val));}},{key:\"componentDidMount\",value:function componentDidMount(){this.interval=setInterval(this.saveInfo,10000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.interval);}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(_Fragment,{children:!this.state.isLoggedIn?/*#__PURE__*/_jsx(AuthRenderer,{changeState:function changeState(key,val){return _this2.state.changeState(key,val);},register:this.register,login:this.login}):null});}}]);return Authentication;}(React.Component);export default Authentication;","map":{"version":3,"names":["React","Axios","AuthRenderer","Authentication","getGameInfo","setGameInfo","setLoggedIn","register","post","username","state","usernameReg","password","passwordReg","gameInfo","then","saveInfo","isLoggedIn","usernameLogin","passwordLogin","console","log","login","response","setState","data","key","val","interval","setInterval","clearInterval","changeState","Component"],"sources":["/Users/faisal/new-clicker-game/src/Authentication.js"],"sourcesContent":["import React from \"react\";\nimport Axios from \"axios\";\nimport AuthRenderer from \"./AuthRenderer\";\n\nclass Authentication extends React.Component {\n\n  constructor({ getGameInfo, setGameInfo, setLoggedIn }) {\n    super()\n    this.getGameInfo = getGameInfo\n    this.setGameInfo = setGameInfo\n    this.setLoggedIn = setLoggedIn\n    this.state = {\n      usernameReg: \"\",\n      passwordReg: \"\",\n      usernameLogin: \"\",\n      passwordLogin: \"\",\n      isLoggedIn: false,\n    }\n  }\n\n  changeState(key,val) {\n    this.setState({ [key]: val});\n  }\n   \n   register = () => {\n    Axios.post(\"http://localhost:3001/create-user\", {\n      username: this.state.usernameReg,\n      password: this.state.passwordReg,\n      gameInfo: this.getGameInfo(),\n    }).then(() => {\n      this.setLoggedIn()\n    });\n\n  };\n\n   saveInfo = () => {\n    if(!this.state.isLoggedIn) return \n    Axios.post(\"http://localhost:3001/save-data\", {\n      username: this.state.usernameLogin,\n      password: this.state.passwordLogin,\n      gameInfo: this.getGameInfo(),\n    }).then(() => console.log(\"Auto Save\", this.getGameInfo()));\n  }\n\n   login = () => {\n    Axios.post(\"http://localhost:3001/login\", {\n      username: this.state.usernameLogin,\n      password: this.state.passwordLogin,\n    }).then((response) => {\n      this.setState({\n        isLoggedIn: true\n      })\n      this.setLoggedIn()\n      this.setGameInfo(response.data)}\n  )};\n\n      componentDidMount() {\n          this.interval = setInterval(this.saveInfo, 10000);\n       }\n       componentWillUnmount() {\n         clearInterval(this.interval);\n       }\n\n  render() {\n    return(\n    <>\n    { \n    !this.state.isLoggedIn ? \n    <AuthRenderer\n    changeState = {(key,val) => this.state.changeState(key,val)}\n    register= {this.register}\n    login={this.login}\n    />\n   \n    : null\n    }\n    </>\n  )}\n}\n\nexport default Authentication;\n"],"mappings":"sjBAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,aAAY,KAAM,gBAAgB,CAAC,mGAEpCC,eAAc,4HAElB,6BAAuD,cAAzCC,YAAW,MAAXA,WAAW,CAAEC,WAAW,MAAXA,WAAW,CAAEC,WAAW,MAAXA,WAAW,sCACjD,wBAAO,MAiBRC,QAAQ,CAAG,UAAM,CAChBN,KAAK,CAACO,IAAI,CAAC,mCAAmC,CAAE,CAC9CC,QAAQ,CAAE,MAAKC,KAAK,CAACC,WAAW,CAChCC,QAAQ,CAAE,MAAKF,KAAK,CAACG,WAAW,CAChCC,QAAQ,CAAE,MAAKV,WAAW,EAC5B,CAAC,CAAC,CAACW,IAAI,CAAC,UAAM,CACZ,MAAKT,WAAW,EAAE,CACpB,CAAC,CAAC,CAEJ,CAAC,OAEAU,QAAQ,CAAG,UAAM,CAChB,GAAG,CAAC,MAAKN,KAAK,CAACO,UAAU,CAAE,OAC3BhB,KAAK,CAACO,IAAI,CAAC,iCAAiC,CAAE,CAC5CC,QAAQ,CAAE,MAAKC,KAAK,CAACQ,aAAa,CAClCN,QAAQ,CAAE,MAAKF,KAAK,CAACS,aAAa,CAClCL,QAAQ,CAAE,MAAKV,WAAW,EAC5B,CAAC,CAAC,CAACW,IAAI,CAAC,iBAAMK,QAAO,CAACC,GAAG,CAAC,WAAW,CAAE,MAAKjB,WAAW,EAAE,CAAC,GAAC,CAC7D,CAAC,OAEAkB,KAAK,CAAG,UAAM,CACbrB,KAAK,CAACO,IAAI,CAAC,6BAA6B,CAAE,CACxCC,QAAQ,CAAE,MAAKC,KAAK,CAACQ,aAAa,CAClCN,QAAQ,CAAE,MAAKF,KAAK,CAACS,aACvB,CAAC,CAAC,CAACJ,IAAI,CAAC,SAACQ,QAAQ,CAAK,CACpB,MAAKC,QAAQ,CAAC,CACZP,UAAU,CAAE,IACd,CAAC,CAAC,CACF,MAAKX,WAAW,EAAE,CAClB,MAAKD,WAAW,CAACkB,QAAQ,CAACE,IAAI,CAAC,EAAC,CACnC,EAAC,CA9CA,MAAKrB,WAAW,CAAGA,WAAW,CAC9B,MAAKC,WAAW,CAAGA,WAAW,CAC9B,MAAKC,WAAW,CAAGA,WAAW,CAC9B,MAAKI,KAAK,CAAG,CACXC,WAAW,CAAE,EAAE,CACfE,WAAW,CAAE,EAAE,CACfK,aAAa,CAAE,EAAE,CACjBC,aAAa,CAAE,EAAE,CACjBF,UAAU,CAAE,KACd,CAAC,cACH,CAAC,sDAED,qBAAYS,GAAG,CAACC,GAAG,CAAE,CACnB,IAAI,CAACH,QAAQ,oBAAIE,GAAG,CAAGC,GAAG,EAAE,CAC9B,CAAC,iCAkCG,4BAAoB,CAChB,IAAI,CAACC,QAAQ,CAAGC,WAAW,CAAC,IAAI,CAACb,QAAQ,CAAE,KAAK,CAAC,CACpD,CAAC,oCACD,+BAAuB,CACrBc,aAAa,CAAC,IAAI,CAACF,QAAQ,CAAC,CAC9B,CAAC,sBAEN,iBAAS,iBACP,mBACA,yBAEA,CAAC,IAAI,CAAClB,KAAK,CAACO,UAAU,cACtB,KAAC,YAAY,EACb,WAAW,CAAI,qBAACS,GAAG,CAACC,GAAG,QAAK,OAAI,CAACjB,KAAK,CAACqB,WAAW,CAACL,GAAG,CAACC,GAAG,CAAC,EAAC,CAC5D,QAAQ,CAAG,IAAI,CAACpB,QAAS,CACzB,KAAK,CAAE,IAAI,CAACe,KAAM,EAChB,CAEA,IAAI,EAEH,CACJ,CAAC,4BAzEyBtB,KAAK,CAACgC,SAAS,EA4E5C,cAAe7B,eAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}